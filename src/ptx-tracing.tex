%
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,  
% EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF  
% MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND  
% NONINFRINGEMENT. IN NO EVENT SHALL SIL INTERNATIONAL BE LIABLE FOR  
% ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF  
% CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION  
% WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
%
% Except as contained in this notice, the name of SIL International  
% shall not be used in advertising or otherwise to promote the sale,  
% use or other dealings in this Software without prior written  
% authorization from SIL International.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ptx-tracing.tex
% tracing macros
% trace identifiers allocated in ptx macros
% a - all traces
% b - balancing (info for external page break analysis)
% d - diglot construction
% D - Diglot gory details
% f - footnotes
% F - fonts
% g - figures
% h - headings
% H - Headers, marks, etc
% i - inserts (tracking the value of holdinginserts)
% j - paragraph adjustments
% o - rebalancing
% p - page output
% P - Piclists
% s - stylesheet
% S - side-dependent swapping 
% v - marginal verses

% Now modified so that multiple \tracing{} commands can be issued.
\newcount\TRACEcount %Numbered tracing for is useful for diglot. May be for something else too.
\def\y@s{y}
\def\tracing#1{\x@\xdef\csname tr@cemode-#1\endcsname{\y@s}\let\trace=\tr@cer}%
\def\notr@cer#1#2{\relax}%
\def\tr@cer#1#2{%
    \let\next=\notr@ceout
    \x@\ifx\csname tr@cemode-#1\endcsname\y@s \let\next=\tr@ceout\fi
    \x@\ifx\csname tr@cemode-a\endcsname\y@s \let\next=\tr@ceout\fi
    \next{#2}}%
\def\tr@ceout#1{%
    \immediate\write-1{#1}}%
\def\traceNum#1#2{\global\advance\TRACEcount by 1\trace{#1}{+\the\TRACEcount: #2}}
\def\notr@ceout#1{\relax}%
\let\trace=\notr@cer

