
\input paratext2.tex

%%%%% Stylesheets %%%%%
\stylesheet{{{/ptxpath}/usfm.sty}}
\stylesheet{{{/ptxpath}/{project/id}/custom.sty}}
%\stylesheet{{NestedStyles.sty}}

{project/ifusemodssty}\stylesheet{{{/ptxpath}/{project/id}/PrintDraft/PrintDraft-mods.sty}} % override project stylesheet settings here

% Where to put these kinds of little files? In PrintDraft folder? 
% Maybe we make ONE file and put all/any .sty tweaks in it (instead of multiple smaller files)  IS THAT WHAT NestedStyles.sty IS FOR??? Duh!
% Temporarily these have been manually copied to the PrintDraft folder (proof of concept)
{document/ifomitallverses}\stylesheet{{{/ptxpath}/{project/id}/PrintDraft/SuppressVerseNums.sty}}
{notes/includefootnotes}\stylesheet{{{/ptxpath}/{project/id}/PrintDraft/SuppressFootnotes.sty}}
{notes/includexrefs}\stylesheet{{{/ptxpath}/{project/id}/PrintDraft/SuppressXrefs.sty}}

%%%%% Page Setup %%%%%
% Dimensions
\PaperWidth={paper/width}
\PaperHeight={paper/height}
\CropMarks{paper/ifcropmarks}

%% Margins
\MarginUnit={paper/margins}mm
\def\TopMarginFactor{{{paper/topmarginfactor}}}
\def\BottomMarginFactor{{{paper/bottommarginfactor}}}
\def\SideMarginFactor{{{paper/sidemarginfactor}}}
\BindingGutter{paper/ifaddgutter}
\BindingGutter={paper/gutter}mm

%% Columns
\TitleColumns=1
\IntroColumns=1
\BodyColumns={paper/columns}
\ColumnGutterRule{paper/ifverticalrule}
\def\ColumnGutterFactor{{{document/colgutterfactor}}}

%%%%% Text Spacing %%%%%
\def\LineSpacingFactor{{{paragraph/linespacing}}}
\def\VerticalSpaceFactor{{1.0}}

%% Cross-space contextualization
% None=0 This is how XeTeX behaves by default. Most projects will use this setting.
% Some=1 Spaces between words are adjusted, but the rendering of individual words is *NOT* affected by the spaces.
% Full=2 Spaces between words are adjusted, and the rendering of individual words *IS* affected by the spaces.
\XeTeXinterwordspaceshaping = {document/spacecntxtlztn}

%%%%% Fonts %%%%%
\FontSizeUnit={paper/fontfactor:.6f}pt   % Q (from MP to MH): Can you explain what's happening here?

%% Faces
\def\regular{{"{fontregular/name}:{document/script}{document/digitmapping}"}}
\def\bold{{"{fontbold/name}:{document/script}{document/digitmapping}{fontbold/embolden}{fontbold/slant}"}}
\def\italic{{"{fontitalic/name}:{document/script}{document/digitmapping}{fontitalic/embolden}{fontitalic/slant}"}}
\def\bolditalic{{"{fontbolditalic/name}:{document/script}{document/digitmapping}{fontbolditalic/embolden}{fontbolditalic/slant}"}}

%%%%% Layout %%%%%
\RTL{document/ifrtl}   % Use right-to-left layout mode?
% Specify ISO 639-1 language code.
% XeTeX will use ICU line break info (useful for scripts which do not use word spaces).
% {document/script}

{document/iflinebreakon}\XeTeXlinebreaklocale "{document/linebreaklocale}"
% Introduce some stretchability (glue) at each potential break
%\XeTeXlinebreakskip=0em plus 0.1em minus 0.01em
\JustifyPars{paragraph/ifjustify}
\IndentAfterHeading{document/supressindent}

%%% Chapters & Verses %%%
\OmitVerseNumberOne{document/ifomitverseone}
\OmitChapterNumber{document/ifomitchapternum}
{document/ifomitallchapters}\def\AfterChapterSpaceFactor{{10}}
{document/ifomitallverses}\def\AfterVerseSpaceFactor{{0}}

%%% Poetry - Hang Verse Numbers
{document/hangpoetry}\sethook{{start}}{{q1}}{{\hangversenumber}}
{document/hangpoetry}\sethook{{start}}{{q2}}{{\hangversenumber}}

%%%%% Notes %%%%%

%% Disable footnote rule (when line is commented out, the footnote rule will show)
{notes/iffootnoterule}\def\footnoterule{{}} 

%\AutoCallerStartChar=97
%\AutoCallerNumChars=26
\AutoCallers{{f}}{{{notes/fncallers}}} % to hide callers in body text this needs to be empty
{notes/fnresetcallers}\PageResetCallers{{f}}
{notes/fnomitcaller}\OmitCallerInNote{{f}}
{notes/fnparagraphednotes}\ParagraphedNotes{{f}}
%\NumericCallers{{f}}

\AutoCallers{{x}}{{{notes/xrcallers}}} % to hide callers in body text this needs to be empty
{notes/xrresetcallers}\PageResetCallers{{x}}
{notes/xromitcaller}\OmitCallerInNote{{x}}
{notes/xrparagraphednotes}\ParagraphedNotes{{x}}
%\NumericCallers{{x}}

%%%%% Running Header/Footer %%%%%
\def\HeaderPosition{{{header/headerposition}}}
\def\FooterPosition{{{header/footerposition}}}
{header/ifrhrule}\RHruleposition={header/ruleposition}pt

%% Odd Header
\def\RHoddleft{{{header/oddleft}}}
\def\RHoddcenter{{{header/oddcenter}}}
\def\RHoddright{{{header/oddright}}}

%% Even Header
\def\RHevenleft{{{header/evenleft}}}
\def\RHevencenter{{{header/evencenter}}}
\def\RHevenright{{{header/evenright}}}

\VerseRefs{header/ifverses}                  % Include verses in reference text?
\OmitChapterNumberRH{header/ifomitrhchapnum} % Omit the chapter numbers in the running header (RH)

%% Footer
\def\RFoddcenter{{{footer/ftrcenter}}}
\def\RFevencenter{{{footer/ftrcenter}}}
\def\RFtitlecenter{{{footer/ftrcenter}}}

%%%%% Illustrations %%%%%
\IncludeFigures{document/iffigures}
{document/usefigsfolder}\PicPath={{{/ptxpath}/{project/id}/figures/}}
{document/uselocalfigs}\PicPath={{{/ptxpath}/{project/id}/local/figures/}}
{document/customfiglocn}\PicPath={{{document/customfigfolder}}}
\FigurePlaceholders{document/iffigplaceholders}
\AdjListPath={{"{/ptxpath}/{project/id}/PrintDraft/ParaAdjLists"}}
\PicListPath={{"{/ptxpath}/{project/id}/PrintDraft/PicLists"}}

% tweak to enable blank lines
\def\b{{\par\vskip\baselineskip}}
% restore page break definition (if present in USFM stylesheet, it has been re-defined and will not work)
\let\pb=\pagebreak

{project/ifusemodstex}\input "{/ptxpath}/{project/id}/PrintDraft/PrintDraft-mods.tex"% adjust/override setup parameters here

%%%%% Hyphenation %%%%%
%% Allocating and using a new language without any hyphenation rules defined effectively disables hyphenation.
%% Hyphenation support is provided through hyphenatedWords.txt.
% \newlanguage\printDraftLanguage
% \language\printDraftLanguage
\hyphenpenalty=10000

%%%%% Watermark PDF file %%%%%
{paper/ifwatermark}\def\PageBorder{{"{paper/watermarkpdf}"}}  % and also pretty border PDFs etc.

%%%%% Front Matter PDF file(s) get included here %%%%%
{project/frontincludes}

{document/toc}\GenerateTOC[{document/toctitle}]{{combined.toc}}
{document/toc}\BodyColumns=1                   % Temporarily set this to Single Column for the ToC page(s)
{document/toc}\ptxfile{{combined.toc}}
{document/toc}\BodyColumns={paper/columns}     % But ensure it goes back to the chosen Single/Double setting for the main body text

%%%%% Load Paratext USFM %%%%%
\XeTeXdefaultencoding "utf-8"
% job files. The next \ptxfile line is replaced, content is not used
\catcode`\%=12
\ptxfile{{PrintDraft/41MATprojid-draft.SFM}}
\catcode`\%=14

%%%%% Back Matter PDF file(s) get included here %%%%%
{project/backincludes}

\end
